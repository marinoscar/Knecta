
> web@0.0.1 test
> vitest --run --reporter=json

{"numTotalTestSuites":99,"numPassedTestSuites":99,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":177,"numPassedTests":104,"numFailedTests":73,"numPendingTests":0,"numTodoTests":0,"startTime":1768967482391,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["","App"],"fullName":" App renders without crashing and shows login page initially","status":"passed","title":"renders without crashing and shows login page initially","duration":311,"failureMessages":[]}],"startTime":1768967514657,"endTime":1768967514968,"status":"passed","message":"","name":"C:/git/EnterpriseAppBase/apps/web/src/__tests__/App.test.tsx"},{"assertionResults":[{"ancestorTitles":["","Example Component Test (Framework Demo)"],"fullName":" Example Component Test (Framework Demo) renders component with providers","status":"passed","title":"renders component with providers","duration":138,"failureMessages":[]},{"ancestorTitles":["","Example Component Test (Framework Demo)"],"fullName":" Example Component Test (Framework Demo) handles user interactions","status":"passed","title":"handles user interactions","duration":196,"failureMessages":[]},{"ancestorTitles":["","Example Component Test (Framework Demo)"],"fullName":" Example Component Test (Framework Demo) renders with authenticated user context","status":"passed","title":"renders with authenticated user context","duration":16,"failureMessages":[]},{"ancestorTitles":["","Example Component Test (Framework Demo)"],"fullName":" Example Component Test (Framework Demo) renders with admin user context","status":"passed","title":"renders with admin user context","duration":15,"failureMessages":[]},{"ancestorTitles":["","Example Component Test (Framework Demo)"],"fullName":" Example Component Test (Framework Demo) renders with dark theme","status":"passed","title":"renders with dark theme","duration":20,"failureMessages":[]},{"ancestorTitles":["","Example Component Test (Framework Demo)"],"fullName":" Example Component Test (Framework Demo) renders at specific route","status":"passed","title":"renders at specific route","duration":15,"failureMessages":[]}],"startTime":1768967495962,"endTime":1768967496363,"status":"passed","message":"","name":"C:/git/EnterpriseAppBase/apps/web/src/__tests__/example-component.test.tsx"},{"assertionResults":[{"ancestorTitles":["","AuthContext","Initial State"],"fullName":" AuthContext Initial State should start in loading state","status":"passed","title":"should start in loading state","duration":82,"failureMessages":[]},{"ancestorTitles":["","AuthContext","Initial State"],"fullName":" AuthContext Initial State should be unauthenticated without valid token","status":"passed","title":"should be unauthenticated without valid token","duration":93,"failureMessages":[]},{"ancestorTitles":["","AuthContext","Initial State"],"fullName":" AuthContext Initial State should fetch providers on mount","status":"passed","title":"should fetch providers on mount","duration":90,"failureMessages":[]},{"ancestorTitles":["","AuthContext","Authentication"],"fullName":" AuthContext Authentication should authenticate user when refresh succeeds","status":"passed","title":"should authenticate user when refresh succeeds","duration":61,"failureMessages":[]},{"ancestorTitles":["","AuthContext","Authentication"],"fullName":" AuthContext Authentication should handle logout","status":"passed","title":"should handle logout","duration":87,"failureMessages":[]},{"ancestorTitles":["","AuthContext","Login Flow"],"fullName":" AuthContext Login Flow should redirect to OAuth provider on login","status":"passed","title":"should redirect to OAuth provider on login","duration":85,"failureMessages":[]},{"ancestorTitles":["","AuthContext","Login Flow"],"fullName":" AuthContext Login Flow should store return URL before login","status":"passed","title":"should store return URL before login","duration":80,"failureMessages":[]},{"ancestorTitles":["","AuthContext","User Refresh"],"fullName":" AuthContext User Refresh should refresh user data","status":"passed","title":"should refresh user data","duration":79,"failureMessages":[]},{"ancestorTitles":["","AuthContext","Error Handling"],"fullName":" AuthContext Error Handling should handle API errors gracefully","status":"passed","title":"should handle API errors gracefully","duration":74,"failureMessages":[]},{"ancestorTitles":["","AuthContext","Error Handling"],"fullName":" AuthContext Error Handling should handle logout errors","status":"passed","title":"should handle logout errors","duration":84,"failureMessages":[]},{"ancestorTitles":["","AuthContext","Error Handling"],"fullName":" AuthContext Error Handling should handle provider fetch errors","status":"passed","title":"should handle provider fetch errors","duration":91,"failureMessages":[]},{"ancestorTitles":["","AuthContext","Context Usage"],"fullName":" AuthContext Context Usage should throw error when used outside provider","status":"passed","title":"should throw error when used outside provider","duration":44,"failureMessages":[]}],"startTime":1768967489696,"endTime":1768967490649,"status":"passed","message":"","name":"C:/git/EnterpriseAppBase/apps/web/src/__tests__/contexts/AuthContext.test.tsx"},{"assertionResults":[{"ancestorTitles":["","ThemeContext","Initial State"],"fullName":" ThemeContext Initial State should default to system preference","status":"passed","title":"should default to system preference","duration":29,"failureMessages":[]},{"ancestorTitles":["","ThemeContext","Initial State"],"fullName":" ThemeContext Initial State should load saved preference from localStorage","status":"passed","title":"should load saved preference from localStorage","duration":4,"failureMessages":[]},{"ancestorTitles":["","ThemeContext","Initial State"],"fullName":" ThemeContext Initial State should ignore invalid localStorage values","status":"passed","title":"should ignore invalid localStorage values","duration":3,"failureMessages":[]},{"ancestorTitles":["","ThemeContext","Theme Switching"],"fullName":" ThemeContext Theme Switching should switch to dark mode","status":"passed","title":"should switch to dark mode","duration":7,"failureMessages":[]},{"ancestorTitles":["","ThemeContext","Theme Switching"],"fullName":" ThemeContext Theme Switching should switch to light mode","status":"passed","title":"should switch to light mode","duration":5,"failureMessages":[]},{"ancestorTitles":["","ThemeContext","Theme Switching"],"fullName":" ThemeContext Theme Switching should switch to system mode","status":"passed","title":"should switch to system mode","duration":3,"failureMessages":[]},{"ancestorTitles":["","ThemeContext","Theme Switching"],"fullName":" ThemeContext Theme Switching should toggle between light and dark","status":"passed","title":"should toggle between light and dark","duration":4,"failureMessages":[]},{"ancestorTitles":["","ThemeContext","Theme Switching"],"fullName":" ThemeContext Theme Switching should persist preference to localStorage","status":"passed","title":"should persist preference to localStorage","duration":4,"failureMessages":[]},{"ancestorTitles":["","ThemeContext","System Preference"],"fullName":" ThemeContext System Preference should use system dark mode when system is dark","status":"passed","title":"should use system dark mode when system is dark","duration":5,"failureMessages":[]},{"ancestorTitles":["","ThemeContext","System Preference"],"fullName":" ThemeContext System Preference should use system light mode when system is light","status":"passed","title":"should use system light mode when system is light","duration":6,"failureMessages":[]},{"ancestorTitles":["","ThemeContext","Theme Object"],"fullName":" ThemeContext Theme Object should provide valid MUI theme object","status":"passed","title":"should provide valid MUI theme object","duration":4,"failureMessages":[]},{"ancestorTitles":["","ThemeContext","Theme Object"],"fullName":" ThemeContext Theme Object should update theme when mode changes","status":"passed","title":"should update theme when mode changes","duration":5,"failureMessages":[]},{"ancestorTitles":["","ThemeContext","Context Usage"],"fullName":" ThemeContext Context Usage should throw error when used outside provider","status":"passed","title":"should throw error when used outside provider","duration":38,"failureMessages":[]}],"startTime":1768967495309,"endTime":1768967495427,"status":"passed","message":"","name":"C:/git/EnterpriseAppBase/apps/web/src/__tests__/contexts/ThemeContext.test.tsx"},{"assertionResults":[{"ancestorTitles":["","LoginPage","Rendering"],"fullName":" LoginPage Rendering should render login page title","status":"failed","title":"should render login page title","duration":59,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","LoginPage","Rendering"],"fullName":" LoginPage Rendering should display sign in message","status":"failed","title":"should display sign in message","duration":8,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","LoginPage","Rendering"],"fullName":" LoginPage Rendering should display available OAuth providers","status":"failed","title":"should display available OAuth providers","duration":7,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","LoginPage","Rendering"],"fullName":" LoginPage Rendering should show loading state while fetching","status":"failed","title":"should show loading state while fetching","duration":13,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","LoginPage","OAuth Flow"],"fullName":" LoginPage OAuth Flow should redirect to OAuth provider on button click","status":"failed","title":"should redirect to OAuth provider on button click","duration":13,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","LoginPage","OAuth Flow"],"fullName":" LoginPage OAuth Flow should handle multiple providers","status":"failed","title":"should handle multiple providers","duration":10,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","LoginPage","Error Handling"],"fullName":" LoginPage Error Handling should show message when no providers available","status":"failed","title":"should show message when no providers available","duration":7,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","LoginPage","Error Handling"],"fullName":" LoginPage Error Handling should handle provider fetch errors gracefully","status":"failed","title":"should handle provider fetch errors gracefully","duration":10,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","LoginPage","Redirect Behavior"],"fullName":" LoginPage Redirect Behavior should redirect authenticated users to home","status":"failed","title":"should redirect authenticated users to home","duration":7,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","LoginPage","Redirect Behavior"],"fullName":" LoginPage Redirect Behavior should not redirect unauthenticated users","status":"failed","title":"should not redirect unauthenticated users","duration":10,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","LoginPage","UI Elements"],"fullName":" LoginPage UI Elements should display terms of service footer","status":"failed","title":"should display terms of service footer","duration":8,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","LoginPage","UI Elements"],"fullName":" LoginPage UI Elements should have proper styling","status":"failed","title":"should have proper styling","duration":7,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}}],"startTime":1768967496052,"endTime":1768967496211,"status":"failed","message":"","name":"C:/git/EnterpriseAppBase/apps/web/src/__tests__/pages/LoginPage.test.tsx"},{"assertionResults":[{"ancestorTitles":["","SystemSettingsPage","Authorization"],"fullName":" SystemSettingsPage Authorization should redirect non-admin users","status":"passed","title":"should redirect non-admin users","duration":45,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Authorization"],"fullName":" SystemSettingsPage Authorization should load settings for admin users","status":"passed","title":"should load settings for admin users","duration":108,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Authorization"],"fullName":" SystemSettingsPage Authorization should show read-only mode when user lacks write permission","status":"passed","title":"should show read-only mode when user lacks write permission","duration":41,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Loading State"],"fullName":" SystemSettingsPage Loading State should show loading spinner while fetching","status":"passed","title":"should show loading spinner while fetching","duration":74,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Error Display"],"fullName":" SystemSettingsPage Error Display should display error message when error exists","status":"passed","title":"should display error message when error exists","duration":18,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Tabs"],"fullName":" SystemSettingsPage Tabs should display all tabs","status":"passed","title":"should display all tabs","duration":92,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Tabs"],"fullName":" SystemSettingsPage Tabs should switch tabs on click","status":"passed","title":"should switch tabs on click","duration":173,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","UI Settings Tab"],"fullName":" SystemSettingsPage UI Settings Tab should display UI settings","status":"passed","title":"should display UI settings","duration":24,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Security Settings Tab"],"fullName":" SystemSettingsPage Security Settings Tab should display security settings in security tab","status":"passed","title":"should display security settings in security tab","duration":131,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Feature Flags Tab"],"fullName":" SystemSettingsPage Feature Flags Tab should display feature flags","status":"passed","title":"should display feature flags","duration":109,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Version Display"],"fullName":" SystemSettingsPage Version Display should display last updated info when available","status":"passed","title":"should display last updated info when available","duration":19,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Version Display"],"fullName":" SystemSettingsPage Version Display should not display updatedBy when not available","status":"passed","title":"should not display updatedBy when not available","duration":20,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Save Functionality"],"fullName":" SystemSettingsPage Save Functionality should call updateSettings when saving","status":"passed","title":"should call updateSettings when saving","duration":16,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Save Functionality"],"fullName":" SystemSettingsPage Save Functionality should show success message after save","status":"passed","title":"should show success message after save","duration":23,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Save Functionality"],"fullName":" SystemSettingsPage Save Functionality should show error message when save fails","status":"passed","title":"should show error message when save fails","duration":32,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Disabled State"],"fullName":" SystemSettingsPage Disabled State should disable all controls while saving","status":"passed","title":"should disable all controls while saving","duration":11,"failureMessages":[]},{"ancestorTitles":["","SystemSettingsPage","Disabled State"],"fullName":" SystemSettingsPage Disabled State should disable controls for read-only users","status":"passed","title":"should disable controls for read-only users","duration":11,"failureMessages":[]}],"startTime":1768967514516,"endTime":1768967515464,"status":"passed","message":"","name":"C:/git/EnterpriseAppBase/apps/web/src/__tests__/pages/SystemSettingsPage.test.tsx"},{"assertionResults":[{"ancestorTitles":["","UserSettingsPage","Loading State"],"fullName":" UserSettingsPage Loading State should show loading spinner while fetching settings","status":"passed","title":"should show loading spinner while fetching settings","duration":110,"failureMessages":[]},{"ancestorTitles":["","UserSettingsPage","Loading State"],"fullName":" UserSettingsPage Loading State should display settings after loading","status":"failed","title":"should display settings after loading","duration":67,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserSettingsPage","Page Content"],"fullName":" UserSettingsPage Page Content should display page title","status":"failed","title":"should display page title","duration":23,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserSettingsPage","Page Content"],"fullName":" UserSettingsPage Page Content should display page description","status":"failed","title":"should display page description","duration":21,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserSettingsPage","Error Display"],"fullName":" UserSettingsPage Error Display should display error message when error exists","status":"passed","title":"should display error message when error exists","duration":20,"failureMessages":[]},{"ancestorTitles":["","UserSettingsPage","Theme Settings"],"fullName":" UserSettingsPage Theme Settings should call updateTheme when theme is changed","status":"failed","title":"should call updateTheme when theme is changed","duration":21,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserSettingsPage","Theme Settings"],"fullName":" UserSettingsPage Theme Settings should show success message after theme update","status":"failed","title":"should show success message after theme update","duration":20,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserSettingsPage","Theme Settings"],"fullName":" UserSettingsPage Theme Settings should show error message when theme update fails","status":"failed","title":"should show error message when theme update fails","duration":18,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserSettingsPage","Profile Settings"],"fullName":" UserSettingsPage Profile Settings should call updateProfile when profile is saved","status":"failed","title":"should call updateProfile when profile is saved","duration":17,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserSettingsPage","Save State"],"fullName":" UserSettingsPage Save State should disable controls while saving","status":"failed","title":"should disable controls while saving","duration":17,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserSettingsPage","Settings Components"],"fullName":" UserSettingsPage Settings Components should render ThemeSettings component","status":"failed","title":"should render ThemeSettings component","duration":17,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserSettingsPage","Settings Components"],"fullName":" UserSettingsPage Settings Components should render ProfileSettings component","status":"failed","title":"should render ProfileSettings component","duration":17,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserSettingsPage","Settings Components"],"fullName":" UserSettingsPage Settings Components should pass current settings to components","status":"failed","title":"should pass current settings to components","duration":16,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserSettingsPage","Snackbar Notifications"],"fullName":" UserSettingsPage Snackbar Notifications should close success message when dismissed","status":"failed","title":"should close success message when dismissed","duration":23,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserSettingsPage","Snackbar Notifications"],"fullName":" UserSettingsPage Snackbar Notifications should close error message when dismissed","status":"failed","title":"should close error message when dismissed","duration":15,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}}],"startTime":1768967514544,"endTime":1768967514966,"status":"failed","message":"","name":"C:/git/EnterpriseAppBase/apps/web/src/__tests__/pages/UserSettingsPage.test.tsx"},{"assertionResults":[{"ancestorTitles":["","ApiService","Token Management"],"fullName":" ApiService Token Management should set access token","status":"passed","title":"should set access token","duration":4,"failureMessages":[]},{"ancestorTitles":["","ApiService","Token Management"],"fullName":" ApiService Token Management should clear access token","status":"passed","title":"should clear access token","duration":1,"failureMessages":[]},{"ancestorTitles":["","ApiService","Token Management"],"fullName":" ApiService Token Management should get current access token","status":"passed","title":"should get current access token","duration":0,"failureMessages":[]},{"ancestorTitles":["","ApiService","GET requests"],"fullName":" ApiService GET requests should make GET request","status":"passed","title":"should make GET request","duration":50,"failureMessages":[]},{"ancestorTitles":["","ApiService","GET requests"],"fullName":" ApiService GET requests should include auth header when token is set","status":"passed","title":"should include auth header when token is set","duration":10,"failureMessages":[]},{"ancestorTitles":["","ApiService","GET requests"],"fullName":" ApiService GET requests should not include auth header when skipAuth is true","status":"passed","title":"should not include auth header when skipAuth is true","duration":7,"failureMessages":[]},{"ancestorTitles":["","ApiService","GET requests"],"fullName":" ApiService GET requests should extract data from response","status":"passed","title":"should extract data from response","duration":5,"failureMessages":[]},{"ancestorTitles":["","ApiService","POST requests"],"fullName":" ApiService POST requests should make POST request with body","status":"passed","title":"should make POST request with body","duration":5,"failureMessages":[]},{"ancestorTitles":["","ApiService","POST requests"],"fullName":" ApiService POST requests should make POST request without body","status":"passed","title":"should make POST request without body","duration":5,"failureMessages":[]},{"ancestorTitles":["","ApiService","POST requests"],"fullName":" ApiService POST requests should set Content-Type header","status":"passed","title":"should set Content-Type header","duration":4,"failureMessages":[]},{"ancestorTitles":["","ApiService","PUT requests"],"fullName":" ApiService PUT requests should make PUT request with body","status":"passed","title":"should make PUT request with body","duration":4,"failureMessages":[]},{"ancestorTitles":["","ApiService","PATCH requests"],"fullName":" ApiService PATCH requests should make PATCH request with body","status":"passed","title":"should make PATCH request with body","duration":5,"failureMessages":[]},{"ancestorTitles":["","ApiService","PATCH requests"],"fullName":" ApiService PATCH requests should include custom headers","status":"passed","title":"should include custom headers","duration":4,"failureMessages":[]},{"ancestorTitles":["","ApiService","DELETE requests"],"fullName":" ApiService DELETE requests should make DELETE request","status":"passed","title":"should make DELETE request","duration":4,"failureMessages":[]},{"ancestorTitles":["","ApiService","Error Handling"],"fullName":" ApiService Error Handling should throw ApiError on 4xx response","status":"passed","title":"should throw ApiError on 4xx response","duration":6,"failureMessages":[]},{"ancestorTitles":["","ApiService","Error Handling"],"fullName":" ApiService Error Handling should throw ApiError on 5xx response","status":"passed","title":"should throw ApiError on 5xx response","duration":4,"failureMessages":[]},{"ancestorTitles":["","ApiService","Error Handling"],"fullName":" ApiService Error Handling should include status code in error","status":"passed","title":"should include status code in error","duration":3,"failureMessages":[]},{"ancestorTitles":["","ApiService","Error Handling"],"fullName":" ApiService Error Handling should include error code in error","status":"passed","title":"should include error code in error","duration":5,"failureMessages":[]},{"ancestorTitles":["","ApiService","Error Handling"],"fullName":" ApiService Error Handling should include error message","status":"passed","title":"should include error message","duration":5,"failureMessages":[]},{"ancestorTitles":["","ApiService","Error Handling"],"fullName":" ApiService Error Handling should handle non-JSON error responses","status":"passed","title":"should handle non-JSON error responses","duration":5,"failureMessages":[]},{"ancestorTitles":["","ApiService","Token Refresh"],"fullName":" ApiService Token Refresh should refresh token on 401 response","status":"failed","title":"should refresh token on 401 response","duration":19,"failureMessages":["expected undefined to be 'new-token' // Object.is equality"],"location":{"line":319,"column":36}},{"ancestorTitles":["","ApiService","Token Refresh"],"fullName":" ApiService Token Refresh should retry original request after refresh","status":"passed","title":"should retry original request after refresh","duration":8,"failureMessages":[]},{"ancestorTitles":["","ApiService","Token Refresh"],"fullName":" ApiService Token Refresh should throw if refresh fails","status":"passed","title":"should throw if refresh fails","duration":5,"failureMessages":[]},{"ancestorTitles":["","ApiService","Token Refresh"],"fullName":" ApiService Token Refresh should not refresh when skipAuth is true","status":"passed","title":"should not refresh when skipAuth is true","duration":5,"failureMessages":[]},{"ancestorTitles":["","ApiService","Token Refresh"],"fullName":" ApiService Token Refresh should clear token when refresh fails","status":"passed","title":"should clear token when refresh fails","duration":4,"failureMessages":[]},{"ancestorTitles":["","ApiService","204 No Content"],"fullName":" ApiService 204 No Content should handle 204 responses","status":"passed","title":"should handle 204 responses","duration":2,"failureMessages":[]},{"ancestorTitles":["","ApiService","204 No Content"],"fullName":" ApiService 204 No Content should handle 204 from DELETE","status":"passed","title":"should handle 204 from DELETE","duration":3,"failureMessages":[]},{"ancestorTitles":["","ApiService","Cookies"],"fullName":" ApiService Cookies should include credentials for cookie handling","status":"passed","title":"should include credentials for cookie handling","duration":3,"failureMessages":[]},{"ancestorTitles":["","ApiService","refreshToken method"],"fullName":" ApiService refreshToken method should return true on successful refresh","status":"failed","title":"should return true on successful refresh","duration":3,"failureMessages":["expected undefined to be 'new-token' // Object.is equality"],"location":{"line":463,"column":36}},{"ancestorTitles":["","ApiService","refreshToken method"],"fullName":" ApiService refreshToken method should return false on failed refresh","status":"passed","title":"should return false on failed refresh","duration":3,"failureMessages":[]},{"ancestorTitles":["","ApiService","refreshToken method"],"fullName":" ApiService refreshToken method should handle network errors during refresh","status":"passed","title":"should handle network errors during refresh","duration":15,"failureMessages":[]},{"ancestorTitles":["","ApiService","Data Extraction"],"fullName":" ApiService Data Extraction should extract data property from response","status":"passed","title":"should extract data property from response","duration":4,"failureMessages":[]},{"ancestorTitles":["","ApiService","Data Extraction"],"fullName":" ApiService Data Extraction should return full response if no data property","status":"passed","title":"should return full response if no data property","duration":8,"failureMessages":[]}],"startTime":1768967489625,"endTime":1768967489847,"status":"failed","message":"","name":"C:/git/EnterpriseAppBase/apps/web/src/__tests__/services/api.test.ts"},{"assertionResults":[{"ancestorTitles":["","LoadingSpinner","Basic Rendering"],"fullName":" LoadingSpinner Basic Rendering should render spinner","status":"passed","title":"should render spinner","duration":167,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Basic Rendering"],"fullName":" LoadingSpinner Basic Rendering should render CircularProgress component","status":"passed","title":"should render CircularProgress component","duration":16,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Full Screen Mode"],"fullName":" LoadingSpinner Full Screen Mode should render full screen when fullScreen prop is true","status":"passed","title":"should render full screen when fullScreen prop is true","duration":15,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Full Screen Mode"],"fullName":" LoadingSpinner Full Screen Mode should render centered in full screen mode","status":"passed","title":"should render centered in full screen mode","duration":13,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Full Screen Mode"],"fullName":" LoadingSpinner Full Screen Mode should take full viewport height","status":"passed","title":"should take full viewport height","duration":14,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Default Mode"],"fullName":" LoadingSpinner Default Mode should render inline when fullScreen is false","status":"passed","title":"should render inline when fullScreen is false","duration":16,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Default Mode"],"fullName":" LoadingSpinner Default Mode should have padding in default mode","status":"passed","title":"should have padding in default mode","duration":12,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Size Prop"],"fullName":" LoadingSpinner Size Prop should use default size of 40","status":"passed","title":"should use default size of 40","duration":9,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Size Prop"],"fullName":" LoadingSpinner Size Prop should accept custom size","status":"passed","title":"should accept custom size","duration":9,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Size Prop"],"fullName":" LoadingSpinner Size Prop should accept small size","status":"passed","title":"should accept small size","duration":9,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Size Prop"],"fullName":" LoadingSpinner Size Prop should accept large size","status":"passed","title":"should accept large size","duration":7,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Prop Combinations"],"fullName":" LoadingSpinner Prop Combinations should handle fullScreen with custom size","status":"passed","title":"should handle fullScreen with custom size","duration":6,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Prop Combinations"],"fullName":" LoadingSpinner Prop Combinations should handle default mode with custom size","status":"passed","title":"should handle default mode with custom size","duration":9,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Accessibility"],"fullName":" LoadingSpinner Accessibility should have progressbar role","status":"passed","title":"should have progressbar role","duration":7,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Accessibility"],"fullName":" LoadingSpinner Accessibility should be accessible in full screen mode","status":"passed","title":"should be accessible in full screen mode","duration":10,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Accessibility"],"fullName":" LoadingSpinner Accessibility should be accessible with custom size","status":"passed","title":"should be accessible with custom size","duration":11,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Visual Layout"],"fullName":" LoadingSpinner Visual Layout should center spinner horizontally","status":"passed","title":"should center spinner horizontally","duration":12,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Visual Layout"],"fullName":" LoadingSpinner Visual Layout should center spinner vertically in full screen","status":"passed","title":"should center spinner vertically in full screen","duration":10,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Visual Layout"],"fullName":" LoadingSpinner Visual Layout should use flexbox layout","status":"passed","title":"should use flexbox layout","duration":12,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Edge Cases"],"fullName":" LoadingSpinner Edge Cases should handle size of 0","status":"passed","title":"should handle size of 0","duration":12,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Edge Cases"],"fullName":" LoadingSpinner Edge Cases should handle very large size","status":"passed","title":"should handle very large size","duration":6,"failureMessages":[]},{"ancestorTitles":["","LoadingSpinner","Edge Cases"],"fullName":" LoadingSpinner Edge Cases should handle undefined fullScreen prop","status":"passed","title":"should handle undefined fullScreen prop","duration":8,"failureMessages":[]}],"startTime":1768967495157,"endTime":1768967495550,"status":"passed","message":"","name":"C:/git/EnterpriseAppBase/apps/web/src/__tests__/components/common/LoadingSpinner.test.tsx"},{"assertionResults":[{"ancestorTitles":["","ProtectedRoute","Loading State"],"fullName":" ProtectedRoute Loading State should show loading while checking auth","status":"failed","title":"should show loading while checking auth","duration":96,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","ProtectedRoute","Authenticated Access"],"fullName":" ProtectedRoute Authenticated Access should render children when authenticated","status":"failed","title":"should render children when authenticated","duration":14,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","ProtectedRoute","Authenticated Access"],"fullName":" ProtectedRoute Authenticated Access should render nested routes when authenticated","status":"failed","title":"should render nested routes when authenticated","duration":16,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","ProtectedRoute","Authenticated Access"],"fullName":" ProtectedRoute Authenticated Access should render Outlet for child routes","status":"failed","title":"should render Outlet for child routes","duration":16,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","ProtectedRoute","Unauthenticated Access"],"fullName":" ProtectedRoute Unauthenticated Access should redirect to login when not authenticated","status":"failed","title":"should redirect to login when not authenticated","duration":20,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","ProtectedRoute","Unauthenticated Access"],"fullName":" ProtectedRoute Unauthenticated Access should not render protected content when unauthenticated","status":"failed","title":"should not render protected content when unauthenticated","duration":8,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","ProtectedRoute","Loading Spinner"],"fullName":" ProtectedRoute Loading Spinner should show full screen loading spinner during auth check","status":"failed","title":"should show full screen loading spinner during auth check","duration":11,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","ProtectedRoute","Location State"],"fullName":" ProtectedRoute Location State should preserve location for redirect after login","status":"failed","title":"should preserve location for redirect after login","duration":12,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","ProtectedRoute","Multiple Protected Routes"],"fullName":" ProtectedRoute Multiple Protected Routes should protect multiple routes","status":"failed","title":"should protect multiple routes","duration":9,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","ProtectedRoute","Edge Cases"],"fullName":" ProtectedRoute Edge Cases should handle rapid auth state changes","status":"failed","title":"should handle rapid auth state changes","duration":9,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}}],"startTime":1768967495349,"endTime":1768967495563,"status":"failed","message":"","name":"C:/git/EnterpriseAppBase/apps/web/src/__tests__/components/common/ProtectedRoute.test.tsx"},{"assertionResults":[{"ancestorTitles":["","AppBar","Rendering"],"fullName":" AppBar Rendering should render app title","status":"failed","title":"should render app title","duration":40,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","Rendering"],"fullName":" AppBar Rendering should render as banner landmark","status":"failed","title":"should render as banner landmark","duration":7,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","Theme Toggle"],"fullName":" AppBar Theme Toggle should render theme toggle button","status":"failed","title":"should render theme toggle button","duration":6,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","Theme Toggle"],"fullName":" AppBar Theme Toggle should show dark mode icon in light mode","status":"failed","title":"should show dark mode icon in light mode","duration":5,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","Theme Toggle"],"fullName":" AppBar Theme Toggle should show light mode icon in dark mode","status":"failed","title":"should show light mode icon in dark mode","duration":9,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","Theme Toggle"],"fullName":" AppBar Theme Toggle should toggle theme on click","status":"failed","title":"should toggle theme on click","duration":6,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","User Menu"],"fullName":" AppBar User Menu should render user menu","status":"failed","title":"should render user menu","duration":6,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","User Menu"],"fullName":" AppBar User Menu should show user menu for authenticated users","status":"failed","title":"should show user menu for authenticated users","duration":6,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","Navigation"],"fullName":" AppBar Navigation should navigate to home when title is clicked","status":"failed","title":"should navigate to home when title is clicked","duration":5,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","Navigation"],"fullName":" AppBar Navigation should have clickable title","status":"failed","title":"should have clickable title","duration":5,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","Styling"],"fullName":" AppBar Styling should use sticky positioning","status":"failed","title":"should use sticky positioning","duration":4,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","Styling"],"fullName":" AppBar Styling should have proper elevation","status":"failed","title":"should have proper elevation","duration":4,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","Responsive Behavior"],"fullName":" AppBar Responsive Behavior should render all elements on desktop","status":"failed","title":"should render all elements on desktop","duration":4,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","Accessibility"],"fullName":" AppBar Accessibility should have accessible theme toggle button","status":"failed","title":"should have accessible theme toggle button","duration":4,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}},{"ancestorTitles":["","AppBar","Accessibility"],"fullName":" AppBar Accessibility should have proper ARIA landmarks","status":"failed","title":"should have proper ARIA landmarks","duration":4,"failureMessages":["useThemeContext must be used within a ThemeContextProvider"],"location":{"line":81,"column":11}}],"startTime":1768967514725,"endTime":1768967514841,"status":"failed","message":"","name":"C:/git/EnterpriseAppBase/apps/web/src/__tests__/components/navigation/AppBar.test.tsx"},{"assertionResults":[{"ancestorTitles":["","UserMenu","Rendering"],"fullName":" UserMenu Rendering should display user avatar button","status":"failed","title":"should display user avatar button","duration":45,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Rendering"],"fullName":" UserMenu Rendering should display user initials when no profile image","status":"failed","title":"should display user initials when no profile image","duration":6,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Rendering"],"fullName":" UserMenu Rendering should display first letter of email when no display name","status":"failed","title":"should display first letter of email when no display name","duration":6,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Rendering"],"fullName":" UserMenu Rendering should not render when user is null","status":"failed","title":"should not render when user is null","duration":5,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Menu Interaction"],"fullName":" UserMenu Menu Interaction should open menu on click","status":"failed","title":"should open menu on click","duration":8,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Menu Interaction"],"fullName":" UserMenu Menu Interaction should display user email in menu","status":"failed","title":"should display user email in menu","duration":5,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Menu Interaction"],"fullName":" UserMenu Menu Interaction should display user display name in menu","status":"failed","title":"should display user display name in menu","duration":4,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Menu Interaction"],"fullName":" UserMenu Menu Interaction should show placeholder when no display name","status":"failed","title":"should show placeholder when no display name","duration":5,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Menu Interaction"],"fullName":" UserMenu Menu Interaction should close menu when clicking outside","status":"failed","title":"should close menu when clicking outside","duration":5,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Menu Items"],"fullName":" UserMenu Menu Items should have settings menu item","status":"failed","title":"should have settings menu item","duration":6,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Menu Items"],"fullName":" UserMenu Menu Items should have logout menu item","status":"failed","title":"should have logout menu item","duration":6,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Menu Items"],"fullName":" UserMenu Menu Items should show system settings for admin users","status":"failed","title":"should show system settings for admin users","duration":5,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Menu Items"],"fullName":" UserMenu Menu Items should NOT show system settings for non-admin users","status":"failed","title":"should NOT show system settings for non-admin users","duration":4,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Navigation"],"fullName":" UserMenu Navigation should navigate to settings page","status":"failed","title":"should navigate to settings page","duration":4,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Navigation"],"fullName":" UserMenu Navigation should navigate to system settings for admins","status":"failed","title":"should navigate to system settings for admins","duration":4,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Logout"],"fullName":" UserMenu Logout should call logout on logout click","status":"failed","title":"should call logout on logout click","duration":4,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Icons"],"fullName":" UserMenu Icons should display settings icon","status":"failed","title":"should display settings icon","duration":4,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Icons"],"fullName":" UserMenu Icons should display logout icon","status":"failed","title":"should display logout icon","duration":4,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Icons"],"fullName":" UserMenu Icons should display admin icon for system settings","status":"failed","title":"should display admin icon for system settings","duration":4,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Accessibility"],"fullName":" UserMenu Accessibility should have proper ARIA attributes","status":"failed","title":"should have proper ARIA attributes","duration":4,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}},{"ancestorTitles":["","UserMenu","Accessibility"],"fullName":" UserMenu Accessibility should have menu ID","status":"failed","title":"should have menu ID","duration":6,"failureMessages":["useAuth must be used within an AuthProvider"],"location":{"line":127,"column":11}}],"startTime":1768967514902,"endTime":1768967515047,"status":"failed","message":"","name":"C:/git/EnterpriseAppBase/apps/web/src/__tests__/components/navigation/UserMenu.test.tsx"}]}
npm error Lifecycle script `test` failed with error:
npm error code 1
npm error path C:\git\EnterpriseAppBase\apps\web
npm error workspace web@0.0.1
npm error location C:\git\EnterpriseAppBase\apps\web
npm error command failed
npm error command C:\WINDOWS\system32\cmd.exe /d /s /c vitest --run --reporter=json
